<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Change Slides</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="alert alert-{{ category }}">
    {{ message }}
</div>
{% endfor %}
{% endif %}
{% endwith %}
<div class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <form method="post">
                {% for i, slide in enumerate(slides) %}
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        <div class="card-body">
                            <input type="text" value="{{ slide.title }}" name="title_{{ i|safe }}" id="title_{{ i|safe }}" class="form-control">
                            <input type="text" value="{{ slide.image }}" name="image_{{ i|safe }}" id="image_{{ i|safe }}" class="form-control">
                            <input type="text" value="{{ slide.time }}" name="time_{{ i|safe }}" id="time_{{ i|safe }}" class="form-control">
                            <img src="{{ url_for('static', filename='img/' + slide.image) }}" style="width: 100%" id="img_{{ i|safe }}"></img>
                        </div>
                    </div>
                </div>
                {% endfor %}
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        <div class="card-body">
                            <p class="text-muted"><button id="add-new" style="font-size: 60px;">+</button></p>
                        </div>
                    </div>
                </div>
                <input type="submit" id="submit" value="Update" class="align-center btn btn-primary">
            </form>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script>
    for (var i = 0; i < {{ slides|length }}; i++) {
        var imageEl = document.getElementById('image_' + i);
        var image = document.getElementById('img_' + i);
        imageEl.addEventListener('input', function () {
            image.src = '/static/img/' + this.value;
        });
    }
</script>
</body>
</html>